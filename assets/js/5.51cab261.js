(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{443:function(s,t,a){s.exports=a.p+"assets/img/image-20211220220436411.536d307c.png"},444:function(s,t){s.exports="data:image/png;base64,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"},594:function(s,t,a){s.exports=a.p+"assets/img/image-20211220184947219.cf08030d.png"},595:function(s,t,a){s.exports=a.p+"assets/img/image-20211220185803936.f0228b21.png"},596:function(s,t,a){s.exports=a.p+"assets/img/image-20211220190458212.81fdb0e1.png"},597:function(s,t,a){s.exports=a.p+"assets/img/image-20211220191555374.d4b22961.png"},598:function(s,t,a){s.exports=a.p+"assets/img/image-20211220191752414.a3f856ac.png"},599:function(s,t,a){s.exports=a.p+"assets/img/image-20211220192513697.fb68e3c5.png"},600:function(s,t,a){s.exports=a.p+"assets/img/image-20211220192902452.6822a233.png"},601:function(s,t,a){s.exports=a.p+"assets/img/image-20211220193216087.d2cd7b51.png"},602:function(s,t,a){s.exports=a.p+"assets/img/image-20211220210634286.a81c61c3.png"},603:function(s,t,a){s.exports=a.p+"assets/img/image-20211220210924304.2816c790.png"},604:function(s,t,a){s.exports=a.p+"assets/img/image-20211220212424478.488bb7ba.png"},605:function(s,t,a){s.exports=a.p+"assets/img/image-20211220231402468.955e3ada.png"},606:function(s,t,a){s.exports=a.p+"assets/img/image-20211220231308953.5a673897.png"},737:function(s,t,a){"use strict";a.r(t);var n=a(33),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"第1章-分布式事务理论及解决方案概览"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第1章-分布式事务理论及解决方案概览"}},[s._v("#")]),s._v(" 第1章：分布式事务理论及解决方案概览")]),s._v(" "),n("h3",{attrs:{id:"什么是分布式事务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是分布式事务"}},[s._v("#")]),s._v(" 什么是分布式事务")]),s._v(" "),n("p",[s._v("分布式事务是来源于微服务的（或类似的场景），服务之间存在着调用，且整个调用链路上存在，多处（分布在不同的微服务上）写数据表的行为，那么，分布式事务就要保证这些操作要么全部成功，要么全部失败")]),s._v(" "),n("p",[n("img",{attrs:{src:a(594),alt:"image-20211220184947219"}})]),s._v(" "),n("h3",{attrs:{id:"分布式事务可能追求的一致性条件不同-业务特性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分布式事务可能追求的一致性条件不同-业务特性"}},[s._v("#")]),s._v(" 分布式事务可能追求的一致性条件不同（业务特性）")]),s._v(" "),n("ul",[n("li",[s._v("**强一致性：**任何一致性读都能读到某个数据的最近一次写的数据（要求最高）")]),s._v(" "),n("li",[s._v("**弱一致性：**数据更新后，如果能容忍后续的访问只能访问到部分或者全部访问不到，则是弱一致性（绝大多数的业务场景都不允许）")]),s._v(" "),n("li",[s._v("**最终一致性：**不保证在任意时刻数据都是完整的（状态一致），但是，随时间的推移（会有个度量），数据总是会达到一致的状态")])]),s._v(" "),n("h3",{attrs:{id:"最常用的分布式事务解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#最常用的分布式事务解决方案"}},[s._v("#")]),s._v(" 最常用的分布式事务解决方案")]),s._v(" "),n("h4",{attrs:{id:"两阶段提交"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#两阶段提交"}},[s._v("#")]),s._v(" 两阶段提交")]),s._v(" "),n("p",[n("strong",[s._v("两阶段指的是分两步提交")]),s._v("：存在一个中央协调器负责协调各个分支事务（"),n("strong",[s._v("强一致性策略")]),s._v("）")]),s._v(" "),n("p",[n("img",{attrs:{src:a(595),alt:"image-20211220185803936"}})]),s._v(" "),n("p",[n("strong",[s._v("缺陷：")])]),s._v(" "),n("ol",[n("li",[s._v("需要引入外部依赖中央协调器，并且会存在单点故障的风险")]),s._v(" "),n("li",[s._v("当参与事务者占用公共资源的情况，其中一个占用公共资源，其他事务参与者只能阻塞等待资源释放")])]),s._v(" "),n("h4",{attrs:{id:"本地消息表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本地消息表"}},[s._v("#")]),s._v(" 本地消息表")]),s._v(" "),n("p",[s._v("该方案的核心是将需要分布式处理的任务通过消息日志的方式来异步执行（"),n("strong",[s._v("最终一致性策略")]),s._v("）")]),s._v(" "),n("img",{staticStyle:{zoom:"67%"},attrs:{src:a(596),alt:"image-20211220190458212"}}),s._v(" "),n("h1",{attrs:{id:"第2章-分布式事物解决方案seata-at-模式解决"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第2章-分布式事物解决方案seata-at-模式解决"}},[s._v("#")]),s._v(" 第2章：分布式事物解决方案Seata AT 模式解决")]),s._v(" "),n("h3",{attrs:{id:"什么是seata"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是seata"}},[s._v("#")]),s._v(" 什么是Seata")]),s._v(" "),n("p",[s._v("Seata是一款开源的分布式解决方案，致力于在微服务架构下提供高性能和简单易用的分布式事物服务，官网：http://seata.io/zh-cn/")]),s._v(" "),n("h3",{attrs:{id:"seata的过程模型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#seata的过程模型"}},[s._v("#")]),s._v(" Seata的过程模型")]),s._v(" "),n("img",{staticStyle:{zoom:"67%"},attrs:{src:a(597),alt:"image-20211220191555374"}}),s._v(" "),n("h3",{attrs:{id:"seata的事务模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#seata的事务模式"}},[s._v("#")]),s._v(" Seata的事务模式")]),s._v(" "),n("p",[n("img",{attrs:{src:a(598),alt:"image-20211220191752414"}})]),s._v(" "),n("h3",{attrs:{id:"seata-at模式的工作机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#seata-at模式的工作机制"}},[s._v("#")]),s._v(" Seata AT模式的工作机制")]),s._v(" "),n("p",[s._v("AT对业务代码完全无侵入性，使用非常简单，改造成本低；我们只需要关注自己的业务SQL，Seata会通过分析我们业务SQL，反向生成回滚数据，在成功的时候会删除这些回滚数据，失败的时候会根据回滚数据实现回滚")]),s._v(" "),n("p",[n("img",{attrs:{src:a(599),alt:"image-20211220192513697"}})]),s._v(" "),n("p",[n("strong",[s._v("Seata AT 模式工作示例：")])]),s._v(" "),n("p",[s._v("两个全局事物tx1和tx2，分别对a表的m字段进行更新操作，m的初始值1000")]),s._v(" "),n("p",[n("img",{attrs:{src:a(600),alt:"image-20211220192902452"}})]),s._v(" "),n("p",[s._v("如果tx1的二阶段全局回滚，则tx1需要重新获取该数据的本地锁，进行反向补偿的更新操作，实现分支的回滚")]),s._v(" "),n("p",[n("img",{attrs:{src:a(601),alt:"image-20211220193216087"}})]),s._v(" "),n("h1",{attrs:{id:"第3章-seata-server单机与高可用模式搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第3章-seata-server单机与高可用模式搭建"}},[s._v("#")]),s._v(" 第3章：Seata Server单机与高可用模式搭建")]),s._v(" "),n("h3",{attrs:{id:"下载seata-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载seata-server"}},[s._v("#")]),s._v(" 下载Seata Server")]),s._v(" "),n("p",[s._v("Seata 下载地址（解压即可）：https://seata.io/zh-cn/blog/download.html")]),s._v(" "),n("p",[n("img",{attrs:{src:a(602),alt:"image-20211220210634286"}})]),s._v(" "),n("h3",{attrs:{id:"seata-server-目录结构讲解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#seata-server-目录结构讲解"}},[s._v("#")]),s._v(" Seata Server 目录结构讲解")]),s._v(" "),n("p",[n("img",{attrs:{src:a(603),alt:"image-20211220210924304"}})]),s._v(" "),n("ul",[n("li",[s._v("seata-server.bat：是windows下启动的文件")]),s._v(" "),n("li",[s._v("seata-server.sh：是mac和linux下启动的文件")]),s._v(" "),n("li",[s._v("file.conf：指定数据存储的配置文件，事务日志相关的数据（Seata支持以文件，DB，Redis的数据格式）")]),s._v(" "),n("li",[s._v("registry.conf：指定注册中心/配置中心的配置文件 （Seata支持的注册模式：文件，Naocs，易沃克，Redis等等）")])]),s._v(" "),n("h2",{attrs:{id:"搭建单机seata-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建单机seata-server"}},[s._v("#")]),s._v(" 搭建单机Seata Server")]),s._v(" "),n("h3",{attrs:{id:"文件方式存储事务日志"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件方式存储事务日志"}},[s._v("#")]),s._v(" 文件方式存储事务日志")]),s._v(" "),n("p",[s._v("使用默认配置搭建单机Seata Server （默认文件存储事务日志），文件方式不足点涉及到的IO是非常大的，集群的时候，文件不能在多个服务器间共享")]),s._v(" "),n("p",[s._v("启动命令：")]),s._v(" "),n("div",{staticClass:"language-bat line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nohup bin/seata-server.sh -h 127.0.0.1 -p 8091 -m file &\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("-h：指定在注册中心注册的IP；不指定时获取当前的IP，外部访问部署在云环境和容器中的server建议指定")]),s._v(" "),n("p",[s._v("-p：端口号；默认端口号是8091")]),s._v(" "),n("p",[s._v("-m：事务日志存储方式，支持file、db、redis，默认为file")]),s._v(" "),n("p",[n("img",{attrs:{src:a(604),alt:"image-20211220212424478"}})]),s._v(" "),n("h3",{attrs:{id:"数据库方式存储事务日志"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库方式存储事务日志"}},[s._v("#")]),s._v(" 数据库方式存储事务日志")]),s._v(" "),n("h5",{attrs:{id:"步骤1-修改file-conf文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤1-修改file-conf文件"}},[s._v("#")]),s._v(" 步骤1：修改file.conf文件")]),s._v(" "),n("p",[n("img",{attrs:{src:a(443),alt:"image-20211220220436411"}})]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("## transaction log store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" only used in seata-server\nstore "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  ## store mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" file、db、redis\n  mode = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db"')]),s._v("\n  ## rsa decryption public key\n  publicKey = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  ## file store property\n  file "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ## store location dir\n    dir = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sessionStore"')]),s._v("\n    # branch session size "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" if exceeded first try compress lockkey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" still exceeded throws exceptions\n    maxBranchSessionSize = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("\n    # globe session size "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" if exceeded throws exceptions\n    maxGlobalSessionSize = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("\n    # file buffer size "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" if exceeded allocate new buffer\n    fileWriteBufferCacheSize = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("\n    # when recover batch read size\n    sessionReloadReadSize = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n    # async"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sync\n    flushDiskMode = async\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ## database store property\n  db "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ## the implement of javax.sql.DataSource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" such as DruidDataSource(druid)/BasicDataSource(dbcp)/HikariDataSource(hikari) etc.\n    datasource = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"druid"')]),s._v("\n    ## mysql/oracle/postgresql/h2/oceanbase etc.\n    dbType = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v("\n    driverClassName = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.mysql.cj.jdbc.Driver"')]),s._v("\n    ## if using mysql to store the data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" recommend add rewriteBatchedStatements="),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" in jdbc connection param\n    url = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdbc:mysql://127.0.0.1:3306/seata?rewriteBatchedStatements=true&useSSL=false&useUnicode=true&characterEncoding=utf8&allowMultiQueries=true&serverTimezone=GMT%2B8"')]),s._v("\n    user = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gm859230"')]),s._v("\n    minConn = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n    maxConn = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\t##存储全局锁的表\n    globalTable = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"global_table"')]),s._v("\n\t##存储本地分支的事务信息\n    branchTable = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"branch_table"')]),s._v("\n\t##存储全局锁和本地锁的事务信息\n    lockTable = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lock_table"')]),s._v("\n    queryLimit = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n    maxWait = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ## redis store property\n  redis "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ## redis mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" single、sentinel\n    mode = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"single"')]),s._v("\n    ## single mode property\n    single "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      host = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),s._v("\n      port = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6379"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    ## sentinel mode property\n    sentinel "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      masterName = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n      ## such as "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.28.235.65:26379,10.28.235.65:26380,10.28.235.65:26381"')]),s._v("\n      sentinelHosts = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    database = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n    minConn = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    maxConn = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n    maxTotal = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n    queryLimit = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br")])]),n("h5",{attrs:{id:"步骤2-创建seata数据表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤2-创建seata数据表"}},[s._v("#")]),s._v(" 步骤2：创建seata数据表")]),s._v(" "),n("p",[n("img",{attrs:{src:a(444),alt:"image-20211220220518809"}})]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store GlobalSession data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("global_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("global_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_service_group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("begin_time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_gmt_modified_status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store BranchSession data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_group_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("lock_key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("client_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store lock data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("lock_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("lock_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("row_key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" LONG "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" LONG"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("table_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("row_key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br")])]),n("h5",{attrs:{id:"步骤3-启动命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-启动命令"}},[s._v("#")]),s._v(" 步骤3：启动命令")]),s._v(" "),n("div",{staticClass:"language-bat line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nohup bin/seata-server.sh -h 127.0.0.1 -p 8091 -m db -n 1 &\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("-h：指定在注册中心注册的IP；不指定时获取当前的IP，外部访问部署在云环境和容器中的server建议指定")]),s._v(" "),n("p",[s._v("-p：端口号；默认端口号是8091")]),s._v(" "),n("p",[s._v("-m：事务日志存储方式，支持file、db、redis，默认为file")]),s._v(" "),n("p",[s._v("-n：用于指定sata-server节点ID；如 1、2、3....;默认为1")]),s._v(" "),n("p",[n("strong",[s._v("注意：需要在MySQL中创建库和表")])]),s._v(" "),n("h2",{attrs:{id:"搭建集群seata-server-高可用模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建集群seata-server-高可用模式"}},[s._v("#")]),s._v(" 搭建集群Seata Server（高可用模式）")]),s._v(" "),n("p",[s._v("高可用模式除了存储方式使用DB之外，还需要注册到注册中心")]),s._v(" "),n("h3",{attrs:{id:"步骤1-修改file-conf文件-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤1-修改file-conf文件-2"}},[s._v("#")]),s._v(" 步骤1：修改file.conf文件")]),s._v(" "),n("p",[n("img",{attrs:{src:a(443),alt:"image-20211220220436411"}})]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("## transaction log store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" only used in seata-server\nstore "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  ## store mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" file、db、redis\n  mode = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db"')]),s._v("\n  ## rsa decryption public key\n  publicKey = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  ## file store property\n  file "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ## store location dir\n    dir = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sessionStore"')]),s._v("\n    # branch session size "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" if exceeded first try compress lockkey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" still exceeded throws exceptions\n    maxBranchSessionSize = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("\n    # globe session size "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" if exceeded throws exceptions\n    maxGlobalSessionSize = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("\n    # file buffer size "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" if exceeded allocate new buffer\n    fileWriteBufferCacheSize = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384")]),s._v("\n    # when recover batch read size\n    sessionReloadReadSize = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n    # async"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sync\n    flushDiskMode = async\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ## database store property\n  db "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ## the implement of javax.sql.DataSource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" such as DruidDataSource(druid)/BasicDataSource(dbcp)/HikariDataSource(hikari) etc.\n    datasource = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"druid"')]),s._v("\n    ## mysql/oracle/postgresql/h2/oceanbase etc.\n    dbType = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),s._v("\n    driverClassName = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.mysql.cj.jdbc.Driver"')]),s._v("\n    ## if using mysql to store the data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" recommend add rewriteBatchedStatements="),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" in jdbc connection param\n    url = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdbc:mysql://127.0.0.1:3306/seata?rewriteBatchedStatements=true&useSSL=false&useUnicode=true&characterEncoding=utf8&allowMultiQueries=true&serverTimezone=GMT%2B8"')]),s._v("\n    user = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gm859230"')]),s._v("\n    minConn = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n    maxConn = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\t##存储全局锁的表\n    globalTable = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"global_table"')]),s._v("\n\t##存储本地分支的事务信息\n    branchTable = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"branch_table"')]),s._v("\n\t##存储全局锁和本地锁的事务信息\n    lockTable = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lock_table"')]),s._v("\n    queryLimit = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n    maxWait = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ## redis store property\n  redis "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ## redis mode"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" single、sentinel\n    mode = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"single"')]),s._v("\n    ## single mode property\n    single "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      host = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),s._v("\n      port = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6379"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    ## sentinel mode property\n    sentinel "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      masterName = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n      ## such as "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.28.235.65:26379,10.28.235.65:26380,10.28.235.65:26381"')]),s._v("\n      sentinelHosts = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    database = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n    minConn = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    maxConn = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n    maxTotal = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n    queryLimit = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br")])]),n("h3",{attrs:{id:"步骤2-创建seata数据表-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤2-创建seata数据表-2"}},[s._v("#")]),s._v(" 步骤2：创建seata数据表")]),s._v(" "),n("p",[n("img",{attrs:{src:a(444),alt:"image-20211220220518809"}})]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store GlobalSession data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("global_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("global_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_service_group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("begin_time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_gmt_modified_status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store BranchSession data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_group_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("lock_key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("client_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store lock data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("lock_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("lock_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("row_key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" LONG "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" LONG"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("table_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("row_key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br")])]),n("h3",{attrs:{id:"步骤3-修改registry-conf文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-修改registry-conf文件"}},[s._v("#")]),s._v(" 步骤3：修改registry.conf文件")]),s._v(" "),n("p",[n("img",{attrs:{src:a(605),alt:"image-20211220231402468"}})]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("registry "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  # file 、nacos 、eureka、redis、zk、consul、etcd3、sofa\n  type = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nacos"')]),s._v("\n\n  nacos "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    application = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"seata-server"')]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"47.103.64.174:8848,47.103.64.174:8848"')]),s._v("\n    group = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SEATA_GROUP"')]),s._v("\n    namespace = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"53dc28d0-21c8-46fd-be52-b206940b7f0d"')]),s._v("\n    cluster = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n    username = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  eureka "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    serviceUrl = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:8761/eureka"')]),s._v("\n    application = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n    weight = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  redis "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost:6379"')]),s._v("\n    db = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    cluster = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n    timeout = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  zk "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    cluster = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:2181"')]),s._v("\n    sessionTimeout = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n    connectTimeout = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n    username = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  consul "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    cluster = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:8500"')]),s._v("\n    aclToken = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  etcd3 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    cluster = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:2379"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  sofa "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:9603"')]),s._v("\n    application = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n    region = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DEFAULT_ZONE"')]),s._v("\n    datacenter = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DefaultDataCenter"')]),s._v("\n    cluster = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n    group = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SEATA_GROUP"')]),s._v("\n    addressWaitTime = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  file "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file.conf"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconfig "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  # file、nacos 、apollo、zk、consul、etcd3\n  type = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file"')]),s._v("\n\n  nacos "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:8848"')]),s._v("\n    namespace = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    group = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SEATA_GROUP"')]),s._v("\n    username = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    dataId = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"seataServer.properties"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  consul "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:8500"')]),s._v("\n    aclToken = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  apollo "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    appId = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"seata-server"')]),s._v("\n    ## apolloConfigService will cover apolloMeta\n    apolloMeta = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.1.204:8801"')]),s._v("\n    apolloConfigService = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.1.204:8080"')]),s._v("\n    namespace = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"application"')]),s._v("\n    apolloAccesskeySecret = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    cluster = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"seata"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  zk "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:2181"')]),s._v("\n    sessionTimeout = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v("\n    connectTimeout = "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n    username = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    password = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    nodePath = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/seata/seata.properties"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  etcd3 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    serverAddr = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:2379"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  file "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name = "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file.conf"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br")])]),n("h3",{attrs:{id:"步骤3-启动命令-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-启动命令-2"}},[s._v("#")]),s._v(" 步骤3：启动命令")]),s._v(" "),n("div",{staticClass:"language-bat line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nohup bin/seata-server.sh -h 127.0.0.1 -p 8091 -m db -n 1 &\nnohup bin/seata-server.sh -h 127.0.0.1 -p 8092 -m db -n 2 &\nnohup bin/seata-server.sh -h 127.0.0.1 -p 8093 -m db -n 3 &\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:a(606),alt:"image-20211220231308953"}})]),s._v(" "),n("h2",{attrs:{id:"附录-sql脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#附录-sql脚本"}},[s._v("#")]),s._v(" 附录：SQL脚本")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- -------------------------------- The script used when storeMode is 'db' --------------------------------")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store GlobalSession data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("global_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("                       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_service_group"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("                   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("begin_time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("              "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_gmt_modified_status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store BranchSession data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("               "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_group_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("client_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("application_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- the table to store lock data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("lock_table"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("row_key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("xid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("resource_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("table_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("             "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_create"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gmt_modified"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("row_key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("idx_branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token identifier"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("branch_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);