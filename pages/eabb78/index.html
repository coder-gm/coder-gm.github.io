<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>其它数据库对象篇 | Coder&#39;Gm 博客</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/icon/note2.png">
    <meta name="description" content="当你的能力支撑不了你的野心的时候，该努力了！！">
    <meta name="keywords" content="Java 全栈知识体系, java体系, java知识体系, java框架,java详解,java学习路线,java spring, java面试, 知识体系, java技术体系, java编程, java编程指南,java开发体系, java开发,java教程,java,java数据结构, 算法, 开发基础">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.a214389c.css" as="style"><link rel="preload" href="/assets/js/app.44e0923e.js" as="script"><link rel="preload" href="/assets/js/2.4a42c91c.js" as="script"><link rel="preload" href="/assets/js/88.6b53f094.js" as="script"><link rel="prefetch" href="/assets/js/10.6658714f.js"><link rel="prefetch" href="/assets/js/100.fe3f39f7.js"><link rel="prefetch" href="/assets/js/101.d5ed3265.js"><link rel="prefetch" href="/assets/js/102.e768d81f.js"><link rel="prefetch" href="/assets/js/103.5535decf.js"><link rel="prefetch" href="/assets/js/11.856f3e3b.js"><link rel="prefetch" href="/assets/js/12.113736c0.js"><link rel="prefetch" href="/assets/js/13.9c439c56.js"><link rel="prefetch" href="/assets/js/14.394ab678.js"><link rel="prefetch" href="/assets/js/15.42d5a0c1.js"><link rel="prefetch" href="/assets/js/16.70d9bc18.js"><link rel="prefetch" href="/assets/js/17.ee4dc88a.js"><link rel="prefetch" href="/assets/js/18.e895a1b3.js"><link rel="prefetch" href="/assets/js/19.bc852c28.js"><link rel="prefetch" href="/assets/js/20.ba3e82a7.js"><link rel="prefetch" href="/assets/js/21.62e9db3b.js"><link rel="prefetch" href="/assets/js/22.cf165019.js"><link rel="prefetch" href="/assets/js/23.1bb9d2ab.js"><link rel="prefetch" href="/assets/js/24.69003ae4.js"><link rel="prefetch" href="/assets/js/25.5ac5fe93.js"><link rel="prefetch" href="/assets/js/26.054194a4.js"><link rel="prefetch" href="/assets/js/27.b411ecdb.js"><link rel="prefetch" href="/assets/js/28.147c4123.js"><link rel="prefetch" href="/assets/js/29.6104efa6.js"><link rel="prefetch" href="/assets/js/3.100b0cf3.js"><link rel="prefetch" href="/assets/js/30.197cf614.js"><link rel="prefetch" href="/assets/js/31.c11c4e4b.js"><link rel="prefetch" href="/assets/js/32.5a90f912.js"><link rel="prefetch" href="/assets/js/33.e3239d33.js"><link rel="prefetch" href="/assets/js/34.e5d60e2a.js"><link rel="prefetch" href="/assets/js/35.ac3a35fa.js"><link rel="prefetch" href="/assets/js/36.88afe5ff.js"><link rel="prefetch" href="/assets/js/37.e6d77bda.js"><link rel="prefetch" href="/assets/js/38.860aa95b.js"><link rel="prefetch" href="/assets/js/39.ff782303.js"><link rel="prefetch" href="/assets/js/4.76e5fb0d.js"><link rel="prefetch" href="/assets/js/40.b0965bf4.js"><link rel="prefetch" href="/assets/js/41.f3fc54f3.js"><link rel="prefetch" href="/assets/js/42.c0751c0f.js"><link rel="prefetch" href="/assets/js/43.8bf64311.js"><link rel="prefetch" href="/assets/js/44.6754651c.js"><link rel="prefetch" href="/assets/js/45.b16895ec.js"><link rel="prefetch" href="/assets/js/46.7226b679.js"><link rel="prefetch" href="/assets/js/47.bc142da5.js"><link rel="prefetch" href="/assets/js/48.32b41242.js"><link rel="prefetch" href="/assets/js/49.292eb956.js"><link rel="prefetch" href="/assets/js/5.51cab261.js"><link rel="prefetch" href="/assets/js/50.079daeec.js"><link rel="prefetch" href="/assets/js/51.d8fb6190.js"><link rel="prefetch" href="/assets/js/52.f1a80eb0.js"><link rel="prefetch" href="/assets/js/53.bfc87ec7.js"><link rel="prefetch" href="/assets/js/54.0d5b8f7b.js"><link rel="prefetch" href="/assets/js/55.031bdd5c.js"><link rel="prefetch" href="/assets/js/56.51a9f261.js"><link rel="prefetch" href="/assets/js/57.7badb0db.js"><link rel="prefetch" href="/assets/js/58.11e7c84b.js"><link rel="prefetch" href="/assets/js/59.09ea85f8.js"><link rel="prefetch" href="/assets/js/6.1217ecf0.js"><link rel="prefetch" href="/assets/js/60.f49dff36.js"><link rel="prefetch" href="/assets/js/61.fc20fc9d.js"><link rel="prefetch" href="/assets/js/62.733e3477.js"><link rel="prefetch" href="/assets/js/63.4bfe99a2.js"><link rel="prefetch" href="/assets/js/64.8227fa59.js"><link rel="prefetch" href="/assets/js/65.9338d8cf.js"><link rel="prefetch" href="/assets/js/66.35d63c81.js"><link rel="prefetch" href="/assets/js/67.0224d223.js"><link rel="prefetch" href="/assets/js/68.bee1f22f.js"><link rel="prefetch" href="/assets/js/69.08704d94.js"><link rel="prefetch" href="/assets/js/7.dc50503c.js"><link rel="prefetch" href="/assets/js/70.3b5276a1.js"><link rel="prefetch" href="/assets/js/71.7d766a0b.js"><link rel="prefetch" href="/assets/js/72.f66ed860.js"><link rel="prefetch" href="/assets/js/73.a0002ad9.js"><link rel="prefetch" href="/assets/js/74.c0599b56.js"><link rel="prefetch" href="/assets/js/75.1ca91be9.js"><link rel="prefetch" href="/assets/js/76.17f9d853.js"><link rel="prefetch" href="/assets/js/77.e563741a.js"><link rel="prefetch" href="/assets/js/78.5cb837e1.js"><link rel="prefetch" href="/assets/js/79.599ee9fe.js"><link rel="prefetch" href="/assets/js/8.7e968594.js"><link rel="prefetch" href="/assets/js/80.614e5db3.js"><link rel="prefetch" href="/assets/js/81.256c8bba.js"><link rel="prefetch" href="/assets/js/82.bc28a824.js"><link rel="prefetch" href="/assets/js/83.31f9acee.js"><link rel="prefetch" href="/assets/js/84.65af7ccd.js"><link rel="prefetch" href="/assets/js/85.5f8c614f.js"><link rel="prefetch" href="/assets/js/86.02957e14.js"><link rel="prefetch" href="/assets/js/87.69e40dad.js"><link rel="prefetch" href="/assets/js/89.d79d52f3.js"><link rel="prefetch" href="/assets/js/9.67eaa601.js"><link rel="prefetch" href="/assets/js/90.ec563f30.js"><link rel="prefetch" href="/assets/js/91.af3f3b1c.js"><link rel="prefetch" href="/assets/js/92.a38cb0ed.js"><link rel="prefetch" href="/assets/js/93.b5aecfec.js"><link rel="prefetch" href="/assets/js/94.ef55686b.js"><link rel="prefetch" href="/assets/js/95.e294b0e5.js"><link rel="prefetch" href="/assets/js/96.6cc86402.js"><link rel="prefetch" href="/assets/js/97.2ddc667e.js"><link rel="prefetch" href="/assets/js/98.b8cf46f9.js"><link rel="prefetch" href="/assets/js/99.aab7dc10.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a214389c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/icon/note2.png" alt="Coder'Gm 博客" class="logo"> <span class="site-name can-hide">Coder'Gm 博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9931eb/" class="nav-link">面向对象</a></li><li class="dropdown-subitem"><a href="/pages/74fec2/" class="nav-link">数据类型</a></li><li class="dropdown-subitem"><a href="/pages/5bde1a/" class="nav-link">变量类型</a></li><li class="dropdown-subitem"><a href="/pages/28535a/" class="nav-link">控制结构</a></li><li class="dropdown-subitem"><a href="/pages/4074f5/" class="nav-link">超类</a></li><li class="dropdown-subitem"><a href="/pages/db85a8/" class="nav-link">Scanner</a></li><li class="dropdown-subitem"><a href="/pages/341e84/" class="nav-link">反射</a></li><li class="dropdown-subitem"><a href="/pages/7ec08c/" class="nav-link">Serializable(序列化)</a></li><li class="dropdown-subitem"><a href="/pages/fbe16d/" class="nav-link">动态代理</a></li><li class="dropdown-subitem"><a href="/pages/78e39b/" class="nav-link">Enum</a></li><li class="dropdown-subitem"><a href="/pages/0d7979/" class="nav-link">IO流</a></li><li class="dropdown-subitem"><a href="/pages/192add/" class="nav-link">Lambda</a></li><li class="dropdown-subitem"><a href="/pages/d2addf/" class="nav-link">Math</a></li><li class="dropdown-subitem"><a href="/pages/0cdbed/" class="nav-link">Random</a></li><li class="dropdown-subitem"><a href="/pages/b722b1/" class="nav-link">UUID</a></li><li class="dropdown-subitem"><a href="/pages/0f7ad8/" class="nav-link">泛型</a></li><li class="dropdown-subitem"><a href="/pages/148cd7/" class="nav-link">网络通信</a></li><li class="dropdown-subitem"><a href="/pages/f46dcf/" class="nav-link">异常和处理</a></li><li class="dropdown-subitem"><a href="/pages/0e008e/" class="nav-link">正则表达式</a></li><li class="dropdown-subitem"><a href="/pages/f42b16/" class="nav-link">Java注解</a></li><li class="dropdown-subitem"><a href="/pages/dac65d/" class="nav-link">JDBC</a></li></ul></li><li class="dropdown-item"><h4>并发与线程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/394d30/" class="nav-link">并发编程核心概念</a></li><li class="dropdown-subitem"><a href="/pages/61ba09/" class="nav-link">JUC-2</a></li></ul></li><li class="dropdown-item"><h4>JVM相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">JUC-1</a></li><li class="dropdown-subitem"><a href="/pages/61ba09/" class="nav-link">JUC-2</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring" class="dropdown-title"><!----> <span class="title" style="display:;">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Framework</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/28e3d0/" class="nav-link">基础1</a></li></ul></li><li class="dropdown-item"><h4>Spring Boot</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">JUC-1</a></li><li class="dropdown-subitem"><a href="/pages/61ba09/" class="nav-link">JUC-2</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><!----> <span class="title" style="display:;">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Nacos 注册中心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9f8459/" class="nav-link">Nacos基本架构和概念</a></li><li class="dropdown-subitem"><a href="/pages/5a44e3/" class="nav-link">Nacos服务注册与发现</a></li><li class="dropdown-subitem"><a href="/pages/20ff14/" class="nav-link">Config服务配置中心</a></li><li class="dropdown-subitem"><a href="/pages/f84a0c/" class="nav-link">Nacos安装部署 </a></li></ul></li><li class="dropdown-item"><h4>Gateway 微服务网关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e87c7c/" class="nav-link">Gateway核心概念</a></li><li class="dropdown-subitem"><a href="/pages/6b0fb9/" class="nav-link">Gateway路由</a></li><li class="dropdown-subitem"><a href="/pages/1a393f/" class="nav-link">Gateway断言</a></li><li class="dropdown-subitem"><a href="/pages/60ff28/" class="nav-link">Gateway过滤器</a></li><li class="dropdown-subitem"><a href="/pages/8fc690/" class="nav-link">Alibaba问题汇总</a></li><li class="dropdown-subitem"><a href="/pages/39605b/" class="nav-link">创建Gateway模块</a></li></ul></li><li class="dropdown-item"><h4>微服务通信</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c6a1f4/" class="nav-link">微服务间通信</a></li></ul></li><li class="dropdown-item"><h4>Seata 分布式事务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d37c45/" class="nav-link">Seata分布式事务解决方案</a></li></ul></li><li class="dropdown-item"><h4>微服务容错</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/470cd5/" class="nav-link">Netflix Hystrix实现微服务容错</a></li><li class="dropdown-subitem"><a href="/pages/eabb78/404" class="nav-link">Sentinel微服务容错</a></li></ul></li><li class="dropdown-item"><h4>Sleuth + Zipkin 日志追踪</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f082ce/" class="nav-link">Sleuth + Zipkin分布式日志追踪</a></li></ul></li><li class="dropdown-item"><h4>授权、鉴权中心微服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5c5a46/" class="nav-link">构建授权、鉴权中心微服务</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式" class="dropdown-title"><!----> <span class="title" style="display:;">分布式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Cloud Alibaba</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3b393a/" class="nav-link">JVM-1</a></li><li class="dropdown-subitem"><a href="/pages/f50dfc/" class="nav-link">JVM-3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>MySQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/cded12/" class="nav-link">基础篇</a></li><li class="dropdown-subitem"><a href="/pages/49bb95/" class="nav-link">高级篇</a></li><li class="dropdown-subitem"><a href="/pages/59225b/" class="nav-link">工具</a></li></ul></li><li class="dropdown-item"><h4>Oracle</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">Oracle知识点</a></li></ul></li><li class="dropdown-item"><h4>Redis</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">Redis知识点</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架|中间件" class="dropdown-title"><!----> <span class="title" style="display:;">框架|中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Framework</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/28e3d0/" class="nav-link">基础1</a></li></ul></li><li class="dropdown-item"><h4>Spring Boot</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">JUC-1</a></li><li class="dropdown-subitem"><a href="/pages/61ba09/" class="nav-link">JUC-2</a></li></ul></li><li class="dropdown-item"><h4>Spring Cloud Alibaba</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3b393a/" class="nav-link">JVM-1</a></li><li class="dropdown-subitem"><a href="/pages/f50dfc/" class="nav-link">JVM-3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具|部署" class="dropdown-title"><!----> <span class="title" style="display:;">工具|部署</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Docker</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a793d4/" class="nav-link">软件安装篇</a></li><li class="dropdown-subitem"><a href="/pages/f3f84f/" class="nav-link">服务部署篇</a></li></ul></li><li class="dropdown-item"><h4>Git</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">Git知识点</a></li></ul></li><li class="dropdown-item"><h4>Linux</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bb176d/" class="nav-link">阿里云</a></li></ul></li><li class="dropdown-item"><h4>Idea</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7eb19a/" class="nav-link">Idea常用插件Top16</a></li><li class="dropdown-subitem"><a href="/pages/55726e/" class="nav-link">Idea设置软换行</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/891539/" class="nav-link">关于我</a></div> <a href="https://github.com/coder-gm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9931eb/" class="nav-link">面向对象</a></li><li class="dropdown-subitem"><a href="/pages/74fec2/" class="nav-link">数据类型</a></li><li class="dropdown-subitem"><a href="/pages/5bde1a/" class="nav-link">变量类型</a></li><li class="dropdown-subitem"><a href="/pages/28535a/" class="nav-link">控制结构</a></li><li class="dropdown-subitem"><a href="/pages/4074f5/" class="nav-link">超类</a></li><li class="dropdown-subitem"><a href="/pages/db85a8/" class="nav-link">Scanner</a></li><li class="dropdown-subitem"><a href="/pages/341e84/" class="nav-link">反射</a></li><li class="dropdown-subitem"><a href="/pages/7ec08c/" class="nav-link">Serializable(序列化)</a></li><li class="dropdown-subitem"><a href="/pages/fbe16d/" class="nav-link">动态代理</a></li><li class="dropdown-subitem"><a href="/pages/78e39b/" class="nav-link">Enum</a></li><li class="dropdown-subitem"><a href="/pages/0d7979/" class="nav-link">IO流</a></li><li class="dropdown-subitem"><a href="/pages/192add/" class="nav-link">Lambda</a></li><li class="dropdown-subitem"><a href="/pages/d2addf/" class="nav-link">Math</a></li><li class="dropdown-subitem"><a href="/pages/0cdbed/" class="nav-link">Random</a></li><li class="dropdown-subitem"><a href="/pages/b722b1/" class="nav-link">UUID</a></li><li class="dropdown-subitem"><a href="/pages/0f7ad8/" class="nav-link">泛型</a></li><li class="dropdown-subitem"><a href="/pages/148cd7/" class="nav-link">网络通信</a></li><li class="dropdown-subitem"><a href="/pages/f46dcf/" class="nav-link">异常和处理</a></li><li class="dropdown-subitem"><a href="/pages/0e008e/" class="nav-link">正则表达式</a></li><li class="dropdown-subitem"><a href="/pages/f42b16/" class="nav-link">Java注解</a></li><li class="dropdown-subitem"><a href="/pages/dac65d/" class="nav-link">JDBC</a></li></ul></li><li class="dropdown-item"><h4>并发与线程</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/394d30/" class="nav-link">并发编程核心概念</a></li><li class="dropdown-subitem"><a href="/pages/61ba09/" class="nav-link">JUC-2</a></li></ul></li><li class="dropdown-item"><h4>JVM相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">JUC-1</a></li><li class="dropdown-subitem"><a href="/pages/61ba09/" class="nav-link">JUC-2</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring" class="dropdown-title"><!----> <span class="title" style="display:;">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Framework</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/28e3d0/" class="nav-link">基础1</a></li></ul></li><li class="dropdown-item"><h4>Spring Boot</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">JUC-1</a></li><li class="dropdown-subitem"><a href="/pages/61ba09/" class="nav-link">JUC-2</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringCloud" class="dropdown-title"><!----> <span class="title" style="display:;">SpringCloud</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Nacos 注册中心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9f8459/" class="nav-link">Nacos基本架构和概念</a></li><li class="dropdown-subitem"><a href="/pages/5a44e3/" class="nav-link">Nacos服务注册与发现</a></li><li class="dropdown-subitem"><a href="/pages/20ff14/" class="nav-link">Config服务配置中心</a></li><li class="dropdown-subitem"><a href="/pages/f84a0c/" class="nav-link">Nacos安装部署 </a></li></ul></li><li class="dropdown-item"><h4>Gateway 微服务网关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e87c7c/" class="nav-link">Gateway核心概念</a></li><li class="dropdown-subitem"><a href="/pages/6b0fb9/" class="nav-link">Gateway路由</a></li><li class="dropdown-subitem"><a href="/pages/1a393f/" class="nav-link">Gateway断言</a></li><li class="dropdown-subitem"><a href="/pages/60ff28/" class="nav-link">Gateway过滤器</a></li><li class="dropdown-subitem"><a href="/pages/8fc690/" class="nav-link">Alibaba问题汇总</a></li><li class="dropdown-subitem"><a href="/pages/39605b/" class="nav-link">创建Gateway模块</a></li></ul></li><li class="dropdown-item"><h4>微服务通信</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c6a1f4/" class="nav-link">微服务间通信</a></li></ul></li><li class="dropdown-item"><h4>Seata 分布式事务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d37c45/" class="nav-link">Seata分布式事务解决方案</a></li></ul></li><li class="dropdown-item"><h4>微服务容错</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/470cd5/" class="nav-link">Netflix Hystrix实现微服务容错</a></li><li class="dropdown-subitem"><a href="/pages/eabb78/404" class="nav-link">Sentinel微服务容错</a></li></ul></li><li class="dropdown-item"><h4>Sleuth + Zipkin 日志追踪</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f082ce/" class="nav-link">Sleuth + Zipkin分布式日志追踪</a></li></ul></li><li class="dropdown-item"><h4>授权、鉴权中心微服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5c5a46/" class="nav-link">构建授权、鉴权中心微服务</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式" class="dropdown-title"><!----> <span class="title" style="display:;">分布式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Cloud Alibaba</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3b393a/" class="nav-link">JVM-1</a></li><li class="dropdown-subitem"><a href="/pages/f50dfc/" class="nav-link">JVM-3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>MySQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/cded12/" class="nav-link">基础篇</a></li><li class="dropdown-subitem"><a href="/pages/49bb95/" class="nav-link">高级篇</a></li><li class="dropdown-subitem"><a href="/pages/59225b/" class="nav-link">工具</a></li></ul></li><li class="dropdown-item"><h4>Oracle</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">Oracle知识点</a></li></ul></li><li class="dropdown-item"><h4>Redis</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">Redis知识点</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架|中间件" class="dropdown-title"><!----> <span class="title" style="display:;">框架|中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Spring Framework</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/28e3d0/" class="nav-link">基础1</a></li></ul></li><li class="dropdown-item"><h4>Spring Boot</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">JUC-1</a></li><li class="dropdown-subitem"><a href="/pages/61ba09/" class="nav-link">JUC-2</a></li></ul></li><li class="dropdown-item"><h4>Spring Cloud Alibaba</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3b393a/" class="nav-link">JVM-1</a></li><li class="dropdown-subitem"><a href="/pages/f50dfc/" class="nav-link">JVM-3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具|部署" class="dropdown-title"><!----> <span class="title" style="display:;">工具|部署</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Docker</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a793d4/" class="nav-link">软件安装篇</a></li><li class="dropdown-subitem"><a href="/pages/f3f84f/" class="nav-link">服务部署篇</a></li></ul></li><li class="dropdown-item"><h4>Git</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c5c8fc/" class="nav-link">Git知识点</a></li></ul></li><li class="dropdown-item"><h4>Linux</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bb176d/" class="nav-link">阿里云</a></li></ul></li><li class="dropdown-item"><h4>Idea</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7eb19a/" class="nav-link">Idea常用插件Top16</a></li><li class="dropdown-subitem"><a href="/pages/55726e/" class="nav-link">Idea设置软换行</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/891539/" class="nav-link">关于我</a></div> <a href="https://github.com/coder-gm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MySQL</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>基础篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/cded12/" class="sidebar-link">SQL之SELECT使用篇</a></li><li><a href="/pages/4d73cb/" class="sidebar-link">SQL之DDL、DML、DCL使用篇</a></li><li><a href="/pages/eabb78/" aria-current="page" class="active sidebar-link">其它数据库对象篇</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_1-常见的数据库对象" class="sidebar-link">1. 常见的数据库对象</a></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_2-视图概述" class="sidebar-link">2. 视图概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_2-1-为什么使用视图" class="sidebar-link">2.1 为什么使用视图？</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_2-2-视图的理解" class="sidebar-link">2.2 视图的理解</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_3-创建视图" class="sidebar-link">3. 创建视图</a></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_4-查看视图" class="sidebar-link">4. 查看视图</a></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_5-更新视图的数据" class="sidebar-link">5. 更新视图的数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_5-1-一般情况" class="sidebar-link">5.1 一般情况</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_5-2-不可更新的视图" class="sidebar-link">5.2 不可更新的视图</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_6-修改、删除视图" class="sidebar-link">6. 修改、删除视图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_6-1-修改视图" class="sidebar-link">6.1 修改视图</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_6-2-删除视图" class="sidebar-link">6.2 删除视图</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_7-总结" class="sidebar-link">7. 总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_7-1-视图优点" class="sidebar-link">7.1 视图优点</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_7-2-视图不足" class="sidebar-link">7.2 视图不足</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_1-存储过程概述" class="sidebar-link">1. 存储过程概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_1-1-理解" class="sidebar-link">1.1 理解</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_2-创建存储过程" class="sidebar-link">2. 创建存储过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_2-1-语法分析" class="sidebar-link">2.1 语法分析</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_2-2-代码举例" class="sidebar-link">2.2 代码举例</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_3-调用存储过程" class="sidebar-link">3. 调用存储过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-1-调用格式" class="sidebar-link">3.1 调用格式</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_4-存储函数的使用" class="sidebar-link">4. 存储函数的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-1-语法分析" class="sidebar-link">4.1 语法分析</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-2-调用存储函数" class="sidebar-link">4.2 调用存储函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-3-代码举例" class="sidebar-link">4.3 代码举例</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-4-对比存储函数和存储过程" class="sidebar-link">4.4 对比存储函数和存储过程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_5-存储过程和函数的查看、修改、删除" class="sidebar-link">5. 存储过程和函数的查看、修改、删除</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_5-1-查看" class="sidebar-link">5.1 查看</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_5-2-修改" class="sidebar-link">5.2 修改</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_5-3-删除" class="sidebar-link">5.3 删除</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_6-关于存储过程使用的争议" class="sidebar-link">6. 关于存储过程使用的争议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_6-1-优点" class="sidebar-link">6.1 优点</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_6-2-缺点" class="sidebar-link">6.2 缺点</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_1-变量" class="sidebar-link">1. 变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_1-1-系统变量" class="sidebar-link">1.1 系统变量</a></li><li class="sidebar-sub-header level4"><a href="/pages/eabb78/#_1-1-1-系统变量分类" class="sidebar-link">1.1.1 系统变量分类</a></li><li class="sidebar-sub-header level4"><a href="/pages/eabb78/#_1-1-2-查看系统变量" class="sidebar-link">1.1.2 查看系统变量</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_1-2-用户变量" class="sidebar-link">1.2 用户变量</a></li><li class="sidebar-sub-header level4"><a href="/pages/eabb78/#_1-2-1-用户变量分类" class="sidebar-link">1.2.1 用户变量分类</a></li><li class="sidebar-sub-header level4"><a href="/pages/eabb78/#_1-2-2-会话用户变量" class="sidebar-link">1.2.2 会话用户变量</a></li><li class="sidebar-sub-header level4"><a href="/pages/eabb78/#_1-2-3-局部变量" class="sidebar-link">1.2.3 局部变量</a></li><li class="sidebar-sub-header level4"><a href="/pages/eabb78/#_1-2-4-对比会话用户变量与局部变量" class="sidebar-link">1.2.4 对比会话用户变量与局部变量</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_2-定义条件与处理程序" class="sidebar-link">2. 定义条件与处理程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_2-1-定义条件" class="sidebar-link">2.1 定义条件</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_2-2-定义处理程序" class="sidebar-link">2.2 定义处理程序</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_3-流程控制" class="sidebar-link">3. 流程控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-1-分支结构之-if" class="sidebar-link">3.1 分支结构之 IF</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-2-分支结构之-case" class="sidebar-link">3.2 分支结构之 CASE</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-3-循环结构之loop" class="sidebar-link">3.3 循环结构之LOOP</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-4-循环结构之while" class="sidebar-link">3.4 循环结构之WHILE</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-5-循环结构之repeat" class="sidebar-link">3.5 循环结构之REPEAT</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-6-跳转语句之leave语句" class="sidebar-link">3.6 跳转语句之LEAVE语句</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-7-跳转语句之iterate语句" class="sidebar-link">3.7 跳转语句之ITERATE语句</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_4-游标" class="sidebar-link">4. 游标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-1-什么是游标-或光标" class="sidebar-link">4.1 什么是游标（或光标）</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-2-使用游标步骤" class="sidebar-link">4.2 使用游标步骤</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-3-小结" class="sidebar-link">4.3 小结</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#补充-mysql-8-0的新特性-全局变量的持久化" class="sidebar-link">补充：MySQL 8.0的新特性—全局变量的持久化</a></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_1-触发器概述" class="sidebar-link">1. 触发器概述</a></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_2-触发器的创建" class="sidebar-link">2. 触发器的创建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_2-1-创建触发器语法" class="sidebar-link">2.1 创建触发器语法</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_3-查看、删除触发器" class="sidebar-link">3. 查看、删除触发器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-1-查看触发器" class="sidebar-link">3.1 查看触发器</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_3-2-删除触发器" class="sidebar-link">3.2 删除触发器</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/eabb78/#_4-触发器的优缺点" class="sidebar-link">4. 触发器的优缺点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-1-优点" class="sidebar-link">4.1 优点</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-2-缺点" class="sidebar-link">4.2 缺点</a></li><li class="sidebar-sub-header level3"><a href="/pages/eabb78/#_4-3-注意点" class="sidebar-link">4.3 注意点</a></li></ul></li></ul></li><li><a href="/pages/4b0689/" class="sidebar-link">MySQL8 新特性篇</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>高级篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Oracle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>数据库</span></li><li data-v-06225672><span data-v-06225672>MySQL</span></li><li data-v-06225672><span data-v-06225672>基础篇</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="http://coder-note.cn" target="_blank" title="作者" class="beLink" data-v-06225672>Coder'Gm</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-04-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">其它数据库对象篇<!----></h1> <div class="page-slot page-slot-top">
  <div class="wwads-cn wwads-horizontal page-ad" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .page-ad img{
      width:80px!important;
    }
    .wwads-horizontal .wwads-content{
      display: flex;
      align-items: center;
    }
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{
      line-height:1;
      flex: 1;
      height: 100%;
      display: flex;
      align-items: center;
    }
    .wwads-horizontal .wwads-poweredby, .wwads-vertical .wwads-poweredby{display: none;!important;}
  </style>
  </div> <div class="theme-vdoing-content content__default"><h1 id="第1章-视图"><a href="#第1章-视图" class="header-anchor">#</a> 第1章 视图</h1> <h2 id="_1-常见的数据库对象"><a href="#_1-常见的数据库对象" class="header-anchor">#</a> <strong>1.</strong> <strong>常见的数据库对象</strong></h2> <table><thead><tr><th>对象</th> <th>描述</th></tr></thead> <tbody><tr><td>表(TABLE)</td> <td>表是存储数据的逻辑单元，以行和列的形式存在，列就是字段，行就是记录</td></tr> <tr><td>数据字典</td> <td>就是系统表，存放数据库相关信息的表。系统表的数据通常由数据库系统维护，程序员通常不应该修改，只可查看</td></tr> <tr><td>约束(CONSTRAINT)</td> <td>执行数据校验的规则，用于保证数据完整性的规则</td></tr> <tr><td>视图(VIEW)</td> <td>一个或者多个数据表里的数据的逻辑显示，视图并不存储数据</td></tr> <tr><td>索引(INDEX)</td> <td>用于提高查询性能，相当于书的目录</td></tr> <tr><td>存储过程(PROCEDURE)</td> <td>用于完成一次完整的业务处理，没有返回值，但可通过传出参数将多个值传给调用环境</td></tr> <tr><td>存储函数(FUNCTION)</td> <td>用于完成一次特定的计算，具有一个返回值</td></tr> <tr><td>触发器(TRIGGER)</td> <td>相当于一个事件监听器，当数据库发生特定事件后，触发器被触发，完成相应的处理</td></tr></tbody></table> <h2 id="_2-视图概述"><a href="#_2-视图概述" class="header-anchor">#</a> <strong>2.</strong> <strong>视图概述</strong></h2> <h3 id="_2-1-为什么使用视图"><a href="#_2-1-为什么使用视图" class="header-anchor">#</a> <strong>2.1</strong> <strong>为什么使用视图？</strong></h3> <p>视图一方面可以帮我们使用表的一部分而不是所有的表，另一方面也可以针对不同的用户制定不同的查询视图。</p> <h3 id="_2-2-视图的理解"><a href="#_2-2-视图的理解" class="header-anchor">#</a> <strong>2.2</strong> <strong>视图的理解</strong></h3> <ul><li>视图是一种<code>虚拟表</code>，本身是<code>不具有数据</code>的，占用很少的内存空间，它是 SQL 中的一个重要概念。</li> <li><strong>视图建立在已有表的基础上</strong>, 视图赖以建立的这些表称为<strong>基表</strong>。</li> <li>视图的创建和删除只影响视图本身，不影响对应的基表。但是当对视图中的数据进行增加、删除和修改操作时，数据表中的数据会相应地发生变化，反之亦然。</li> <li>向视图提供数据内容的语句为 SELECT 语句, 可以将视图理解为<strong>存储起来的</strong> <strong>SELECT</strong> <strong>语句</strong> <ul><li>在数据库中，视图不会保存数据，数据真正保存在数据表中。当对视图中的数据进行增加、删除和修改操作时，数据表中的数据会相应地发生变化；反之亦然。</li></ul></li> <li>视图，是向用户提供基表数据的另一种表现形式。通常情况下，小型项目的数据库可以不使用视图，但是在大型项目中，以及数据表比较复杂的情况下，视图的价值就凸显出来了，它可以帮助我们把经常查询的结果集放到虚拟表中，提升使用效率。理解和使用起来都非常方便。</li></ul> <h2 id="_3-创建视图"><a href="#_3-创建视图" class="header-anchor">#</a> <strong>3.</strong> <strong>创建视图</strong></h2> <ul><li><strong>在</strong> <strong>CREATE VIEW</strong> <strong>语句中嵌入子查询</strong></li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE [OR REPLACE] 
[ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}] 
VIEW 视图名称 [(字段列表)] 
AS 查询语句 
[WITH [CASCADED|LOCAL] CHECK OPTION]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>精简版</li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE VIEW 视图名称 
AS 查询语句
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_4-查看视图"><a href="#_4-查看视图" class="header-anchor">#</a> <strong>4.</strong> <strong>查看视图</strong></h2> <p>语法1：查看数据库的表对象、视图对象</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SHOW TABLES;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>语法2：查看视图的结构</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DESC / DESCRIBE 视图名称;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>语法3：查看视图的属性信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># 查看视图信息（显示数据表的存储引擎、版本、数据行数和数据大小等） 
SHOW TABLE STATUS LIKE '视图名称'\G
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行结果显示，注释Comment为VIEW，说明该表为视图，其他的信息为NULL，说明这是一个虚表。</p> <p>语法4：查看视图的详细定义信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SHOW CREATE VIEW 视图名称;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_5-更新视图的数据"><a href="#_5-更新视图的数据" class="header-anchor">#</a> <strong>5.</strong> <strong>更新视图的数据</strong></h2> <h3 id="_5-1-一般情况"><a href="#_5-1-一般情况" class="header-anchor">#</a> <strong>5.1</strong> <strong>一般情况</strong></h3> <p>MySQL支持使用INSERT、UPDATE和DELETE语句对视图中的数据进行插入、更新和删除操作。当视图中的数据发生变化时，数据表中的数据也会发生变化，反之亦然。</p> <h3 id="_5-2-不可更新的视图"><a href="#_5-2-不可更新的视图" class="header-anchor">#</a> <strong>5.2</strong> <strong>不可更新的视图</strong></h3> <p>要使视图可更新，视图中的行和底层基本表中的行之间必须存在<code>一对一</code>的关系。另外当视图定义出现如下情况时，视图不支持更新操作：</p> <ul><li>在定义视图的时候指定了“ALGORITHM = TEMPTABLE”，视图将不支持INSERT和DELETE操作；</li> <li>视图中不包含基表中所有被定义为非空又未指定默认值的列，视图将不支持INSERT操作；</li> <li>在定义视图的SELECT语句中使用了<code>JOIN联合查询</code>，视图将不支持INSERT和DELETE操作；</li> <li>在定义视图的SELECT语句后的字段列表中使用了<code>数学表达式</code>或<code>子查询</code>，视图将不支持INSERT，也不支持UPDATE使用了数学表达式、子查询的字段值；</li> <li>在定义视图的SELECT语句后的字段列表中使用<code>DISTINCT</code>、<code>聚合函数</code>、<code>GROUP BY</code>、<code>HAVING</code>、<code>UNION</code>等，视图将不支持INSERT、UPDATE、DELETE；</li> <li>在定义视图的SELECT语句中包含了子查询，而子查询中引用了FROM后面的表，视图将不支持 INSERT、UPDATE、DELETE；</li> <li>视图定义基于一个<code>不可更新视图</code>；</li> <li>常量视图</li></ul> <blockquote><p>虽然可以更新视图数据，但总的来说，视图作为<code>虚拟表</code>，主要用于<code>方便查询</code>，不建议更新视图的数据。<strong>对视图数据的更改，都是通过对实际数据表里数据的操作来完成的。</strong></p></blockquote> <h2 id="_6-修改、删除视图"><a href="#_6-修改、删除视图" class="header-anchor">#</a> <strong>6.</strong> <strong>修改、删除视图</strong></h2> <h3 id="_6-1-修改视图"><a href="#_6-1-修改视图" class="header-anchor">#</a> <strong>6.1</strong> <strong>修改视图</strong></h3> <p>方式1：使用CREATE <strong>OR REPLACE</strong> VIEW 子句<strong>修改视图</strong></p> <p>方式2：ALTER VIEW</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER VIEW 视图名称 
AS
查询语句
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-2-删除视图"><a href="#_6-2-删除视图" class="header-anchor">#</a> <strong>6.2</strong> <strong>删除视图</strong></h3> <ul><li>删除视图只是删除视图的定义，并不会删除基表的数据。</li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DROP VIEW IF EXISTS 视图名称;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_7-总结"><a href="#_7-总结" class="header-anchor">#</a> <strong>7.</strong> <strong>总结</strong></h2> <h3 id="_7-1-视图优点"><a href="#_7-1-视图优点" class="header-anchor">#</a> <strong>7.1</strong> <strong>视图优点</strong></h3> <p><strong>1.</strong> <strong>操作简单</strong></p> <p>将经常使用的查询操作定义为视图，可以使开发人员不需要关心视图对应的数据表的结构、表与表之间的关联关系，也不需要关心数据表之间的业务逻辑和查询条件，而只需要简单地操作视图即可，极大简化了开发人员对数据库的操作。</p> <p><strong>2.</strong> <strong>减少数据冗余</strong></p> <p>视图跟实际数据表不一样，它存储的是查询语句。所以，在使用的时候，我们要通过定义视图的查询语句来获取结果集。而视图本身不存储数据，不占用数据存储的资源，减少了数据冗余。</p> <p><strong>3.</strong> <strong>数据安全</strong></p> <p>MySQL将用户对数据的<code>访问限制</code>在某些数据的结果集上，而这些数据的结果集可以使用视图来实现。用户不必直接查询或操作数据表。这也可以理解为视图具有<code>隔离性</code>。视图相当于在用户和实际的数据表之间加了一层虚拟表。</p> <p>同时，MySQL可以根据权限将用户对数据的访问限制在某些视图上，<strong>用户不需要查询数据表，可以直接通过视图获取数据表中的信息</strong>。这在一定程度上保障了数据表中数据的安全性。</p> <p><strong>4.</strong> <strong>适应灵活多变的需求</strong> 当业务系统的需求发生变化后，如果需要改动数据表的结构，则工作量相对较大，可以使用视图来减少改动的工作量。这种方式在实际工作中使用得比较多。</p> <p><strong>5.</strong> <strong>能够分解复杂的查询逻辑</strong> 数据库中如果存在复杂的查询逻辑，则可以将问题进行分解，创建多个视图获取数据，再将创建的多个视图结合起来，完成复杂的查询逻辑。</p> <h3 id="_7-2-视图不足"><a href="#_7-2-视图不足" class="header-anchor">#</a> <strong>7.2</strong> <strong>视图不足</strong></h3> <p>如果我们在实际数据表的基础上创建了视图，那么，<strong>如果实际数据表的结构变更了，我们就需要及时对相关的视图进行相应的维护</strong>。特别是嵌套的视图（就是在视图的基础上创建视图），维护会变得比较复杂， 可读性不好 ，容易变成系统的潜在隐患。因为创建视图的 SQL 查询可能会对字段重命名，也可能包含复杂的逻辑，这些都会增加维护的成本。</p> <p>实际项目中，如果视图过多，会导致数据库维护成本的问题。</p> <p>所以，在创建视图的时候，你要结合实际项目需求，综合考虑视图的优点和不足，这样才能正确使用视图，使系统整体达到最优。</p> <h1 id="第2章-存储过程与函数"><a href="#第2章-存储过程与函数" class="header-anchor">#</a> 第2章 存储过程与函数</h1> <h2 id="_1-存储过程概述"><a href="#_1-存储过程概述" class="header-anchor">#</a> <strong>1.</strong> <strong>存储过程概述</strong></h2> <h3 id="_1-1-理解"><a href="#_1-1-理解" class="header-anchor">#</a> <strong>1.1</strong> <strong>理解</strong></h3> <p><strong>含义</strong>：存储过程的英文是<code>Stored Procedure</code>。它的思想很简单，就是一组经过<code>预先编译</code>的 SQL 语句的封装。</p> <p>执行过程：存储过程预先存储在 MySQL 服务器上，需要执行的时候，客户端只需要向服务器端发出调用存储过程的命令，服务器端就可以把预先存储好的这一系列 SQL 语句全部执行。</p> <h2 id="_2-创建存储过程"><a href="#_2-创建存储过程" class="header-anchor">#</a> <strong>2.</strong> <strong>创建存储过程</strong></h2> <h3 id="_2-1-语法分析"><a href="#_2-1-语法分析" class="header-anchor">#</a> <strong>2.1</strong> <strong>语法分析</strong></h3> <p>语法：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE PROCEDURE 存储过程名(IN|OUT|INOUT 参数名 参数类型,...) 
[characteristics ...] 
BEGIN
	存储过程体 
END
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>说明：</p> <p>1、参数前面的符号的意思</p> <ul><li><code>IN</code>：当前参数为输入参数，也就是表示入参；
<ul><li>存储过程只是读取这个参数的值。如果没有定义参数种类，<code>默认就是 IN</code>，表示输入参数。</li></ul></li> <li><code>OUT</code>：当前参数为输出参数，也就是表示出参；
<ul><li>执行完成之后，调用这个存储过程的客户端或者应用程序就可以读取这个参数返回的值了。</li></ul></li> <li><code>INOUT</code>：当前参数既可以为输入参数，也可以为输出参数。</li></ul> <p>2、形参类型可以是 MySQL数据库中的任意类型。</p> <p>3、<code>characteristics</code>表示创建存储过程时指定的对存储过程的约束条件，其取值信息如下：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>LANGUAGE SQL 
| [NOT] DETERMINISTIC 
| { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA } 
| SQL SECURITY { DEFINER | INVOKER } 
| COMMENT 'string'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p><code>LANGUAGE SQL</code>：说明存储过程执行体是由SQL语句组成的，当前系统支持的语言为SQL。</p></li> <li><p><code>[NOT] DETERMINISTIC</code>：指明存储过程执行的结果是否确定。DETERMINISTIC表示结果是确定的。每次执行存储过程时，相同的输入会得到相同的输出。NOT DETERMINISTIC表示结果是不确定的，相同的输入可能得到不同的输出。如果没有指定任意一个值，默认为NOT DETERMINISTIC。</p></li> <li><p><code>{ CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }</code>：指明子程序使用SQL语句的限制。</p> <ul><li>CONTAINS SQL表示当前存储过程的子程序包含SQL语句，但是并不包含读写数据的SQL语句；</li> <li>NO SQL表示当前存储过程的子程序中不包含任何SQL语句；</li> <li>READS SQL DATA表示当前存储过程的子程序中包含读数据的SQL语句；</li> <li>MODIFIES SQL DATA表示当前存储过程的子程序中包含写数据的SQL语句。</li> <li>默认情况下，系统会指定为CONTAINS SQL。</li></ul></li> <li><p><code>SQL SECURITY { DEFINER | INVOKER }</code>：执行当前存储过程的权限，即指明哪些用户能够执行当前存储过程。</p> <ul><li><code>DEFINER</code>表示只有当前存储过程的创建者或者定义者才能执行当前存储过程；</li> <li><code>INVOKER</code>表示拥有当前存储过程的访问权限的用户能够执行当前存储过程。</li></ul></li> <li><p><code>COMMENT 'string'</code>：注释信息，可以用来描述存储过程。</p></li></ul> <p>4、存储过程体中可以有多条 SQL 语句，如果仅仅一条SQL 语句，则可以省略 BEGIN 和 END</p> <p>5、需要设置新的结束标记</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER 新的结束标记
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-2-代码举例"><a href="#_2-2-代码举例" class="header-anchor">#</a> <strong>2.2</strong> <strong>代码举例</strong></h3> <p>举例1：创建存储过程select_all_data()，查看 emps 表的所有数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $ 
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> select_all_data<span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token keyword">BEGIN</span>
	<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emps<span class="token punctuation">;</span> 
<span class="token keyword">END</span> $ 
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>举例2：创建存储过程avg_employee_salary()，返回所有员工的平均工资</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER // 
CREATE PROCEDURE avg_employee_salary () 
BEGIN
	SELECT AVG(salary) AS avg_salary FROM emps; 
END // 
DELIMITER ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>举例3：创建存储过程show_max_salary()，用来查看“emps”表的最高薪资值。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER // 
CREATE PROCEDURE show_max_salary() 
    LANGUAGE SQL
    NOT DETERMINISTIC
    CONTAINS SQL 
    SQL SECURITY DEFINER 
    COMMENT '查看最高薪资' 
BEGIN
	SELECT MAX(salary) FROM emps;
END // 
DELIMITER ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>举例4：创建存储过程show_someone_salary2()，查看“emps”表的某个员工的薪资，并用IN参数empname输入员工姓名，用OUT参数empsalary输出员工薪资。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER // 
CREATE PROCEDURE show_someone_salary2(IN empname VARCHAR(20),OUT empsalary DOUBLE) 
BEGIN
	SELECT salary INTO empsalary FROM emps WHERE ename = empname; 
END // 
DELIMITER ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>举例5：创建存储过程show_mgr_name()，查询某个员工领导的姓名，并用INOUT参数“empname”输入员工姓名，输出领导的姓名。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER // 
CREATE PROCEDURE show_mgr_name(INOUT empname VARCHAR(20)) 
BEGIN
	SELECT ename INTO empname FROM emps WHERE eid = (SELECT MID FROM emps WHERE ename=empname); 
END // 
DELIMITER ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-调用存储过程"><a href="#_3-调用存储过程" class="header-anchor">#</a> <strong>3.</strong> <strong>调用存储过程</strong></h2> <h3 id="_3-1-调用格式"><a href="#_3-1-调用格式" class="header-anchor">#</a> <strong>3.1</strong> <strong>调用格式</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CALL 存储过程名(实参列表)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>格式：</strong></p> <p>1、调用in模式的参数：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CALL sp1('值');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、调用out模式的参数：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET @name; 
CALL sp1(@name); 
SELECT @name;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>3、调用inout模式的参数：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET @name=值; 
CALL sp1(@name); 
SELECT @name;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_4-存储函数的使用"><a href="#_4-存储函数的使用" class="header-anchor">#</a> <strong>4.</strong> <strong>存储函数的使用</strong></h2> <h3 id="_4-1-语法分析"><a href="#_4-1-语法分析" class="header-anchor">#</a> <strong>4.1</strong> <strong>语法分析</strong></h3> <p>语法格式：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE FUNCTION 函数名(参数名 参数类型,...) 
RETURNS 返回值类型 
[characteristics ...] 
BEGIN
	函数体 #函数体中肯定有 RETURN 语句 
END
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>说明：</p> <p>1、参数列表：指定参数为IN、OUT或INOUT只对PROCEDURE是合法的，FUNCTION中总是默认为IN参数。</p> <p>2、RETURNS type 语句表示函数返回数据的类型；</p> <p>RETURNS子句只能对FUNCTION做指定，对函数而言这是<code>强制</code>的。它用来指定函数的返回类型，而且函数体必须包含一个<code>RETURN value</code>语句。</p> <p>3、characteristic 创建函数时指定的对函数的约束。取值与创建存储过程时相同，这里不再赘述。</p> <p>4、函数体也可以用BEGIN…END来表示SQL代码的开始和结束。如果函数体只有一条语句，也可以省略BEGIN…END。</p> <h3 id="_4-2-调用存储函数"><a href="#_4-2-调用存储函数" class="header-anchor">#</a> <strong>4.2</strong> <strong>调用存储函数</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 函数名(实参列表)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-3-代码举例"><a href="#_4-3-代码举例" class="header-anchor">#</a> <strong>4.3</strong> <strong>代码举例</strong></h3> <p>创建存储函数count_by_id()，参数传入dept_id，该函数查询dept_id部门的员工人数，并返回，数据类型为整型。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER // 
CREATE FUNCTION count_by_id(dept_id INT) 
RETURNS INT 
	LANGUAGE SQL 
	NOT DETERMINISTIC 
	READS SQL DATA 
	SQL SECURITY DEFINER 
	COMMENT '查询部门平均工资' 
BEGIN
	RETURN (SELECT COUNT(*) FROM employees WHERE department_id = dept_id); 
END // 
DELIMITER ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>调用：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET @dept_id = 50; 
SELECT count_by_id(@dept_id);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>注意：</strong></p> <p>若在创建存储函数中报错“<code>you might want to use the less safe log_bin_trust_function_creators variable</code>”，有两种处理方法：</p> <ul><li>方式1：加上必要的函数特性“[NOT] DETERMINISTIC”和“{CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA}”</li> <li>方式2：</li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>mysql&gt; SET GLOBAL log_bin_trust_function_creators = 1;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-4-对比存储函数和存储过程"><a href="#_4-4-对比存储函数和存储过程" class="header-anchor">#</a> <strong>4.4</strong> <strong>对比存储函数和存储过程</strong></h3> <table><thead><tr><th></th> <th>关键字</th> <th>调用语法</th> <th>返回值</th> <th>应用场景</th></tr></thead> <tbody><tr><td>存储过程</td> <td>PROCEDURE</td> <td>CALL 存储过程()</td> <td>理解为有0个或多个</td> <td>一般用于更新</td></tr> <tr><td>存储函数</td> <td>FUNCTION</td> <td>SELECT 函数()</td> <td>只能是一个</td> <td>一般用于查询结果为一个值并返回时</td></tr></tbody></table> <p>此外，<strong>存储函数可以放在查询语句中使用，存储过程不行</strong>。反之，存储过程的功能更加强大，包括能够执行对表的操作（比如创建表，删除表等）和事务操作，这些功能是存储函数不具备的。</p> <h2 id="_5-存储过程和函数的查看、修改、删除"><a href="#_5-存储过程和函数的查看、修改、删除" class="header-anchor">#</a> <strong>5.</strong> <strong>存储过程和函数的查看、修改、删除</strong></h2> <h3 id="_5-1-查看"><a href="#_5-1-查看" class="header-anchor">#</a> <strong>5.1</strong> <strong>查看</strong></h3> <p><strong>1.</strong> <strong>使用SHOW CREATE语句查看存储过程和函数的创建信息</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SHOW CREATE {PROCEDURE | FUNCTION} 存储过程名或函数名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2.</strong> <strong>使用SHOW STATUS语句查看存储过程和函数的状态信息</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SHOW {PROCEDURE | FUNCTION} STATUS [LIKE 'pattern']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3.</strong> <strong>从information_schema.Routines表中查看存储过程和函数的信息</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * FROM information_schema.Routines 
WHERE ROUTINE_NAME='存储过程或函数的名' [AND ROUTINE_TYPE = {'PROCEDURE|FUNCTION'}];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-2-修改"><a href="#_5-2-修改" class="header-anchor">#</a> <strong>5.2</strong> <strong>修改</strong></h3> <p>修改存储过程或函数，不影响存储过程或函数功能，只是修改相关特性。使用ALTER语句实现。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ALTER {PROCEDURE | FUNCTION} 存储过程或函数的名 [characteristic ...];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中，characteristic指定存储过程或函数的特性，其取值信息与创建存储过程、函数时的取值信息略有不同。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>{ CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA } 
| SQL SECURITY { DEFINER | INVOKER } 
| COMMENT 'string'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-3-删除"><a href="#_5-3-删除" class="header-anchor">#</a> <strong>5.3</strong> <strong>删除</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DROP {PROCEDURE | FUNCTION} [IF EXISTS] 存储过程或函数的名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_6-关于存储过程使用的争议"><a href="#_6-关于存储过程使用的争议" class="header-anchor">#</a> <strong>6.</strong> <strong>关于存储过程使用的争议</strong></h2> <h3 id="_6-1-优点"><a href="#_6-1-优点" class="header-anchor">#</a> <strong>6.1</strong> <strong>优点</strong></h3> <p>**1、存储过程可以一次编译多次使用。**存储过程只在创建时进行编译，之后的使用都不需要重新编译，这就提升了 SQL 的执行效率。</p> <p>**2、可以减少开发工作量。**将代码<code>封装</code>成模块，实际上是编程的核心思想之一，这样可以把复杂的问题拆解成不同的模块，然后模块之间可以<code>重复使用</code>，在减少开发工作量的同时，还能保证代码的结构清晰。</p> <p>**3、存储过程的安全性强。**我们在设定存储过程的时候可以<code>设置对用户的使用权限</code>，这样就和视图一样具有较强的安全性。</p> <p>**4、可以减少网络传输量。**因为代码封装到存储过程中，每次使用只需要调用存储过程即可，这样就减少了网络传输量。</p> <p>**5、良好的封装性。**在进行相对复杂的数据库操作时，原本需要使用一条一条的 SQL 语句，可能要连接多次数据库才能完成的操作，现在变成了一次存储过程，只需要<code>连接一次即可</code>。</p> <h3 id="_6-2-缺点"><a href="#_6-2-缺点" class="header-anchor">#</a> <strong>6.2</strong> <strong>缺点</strong></h3> <blockquote><p><strong>阿里开发规范</strong></p> <p>【强制】禁止使用存储过程，存储过程难以调试和扩展，更没有移植性。</p></blockquote> <p>**1、可移植性差。**存储过程不能跨数据库移植，比如在 MySQL、Oracle 和 SQL Server 里编写的存储过程，在换成其他数据库时都需要重新编写。</p> <p>**2、调试困难。**只有少数 DBMS 支持存储过程的调试。对于复杂的存储过程来说，开发和维护都不容易。虽然也有一些第三方工具可以对存储过程进行调试，但要收费。</p> <p>**3、存储过程的版本管理很困难。**比如数据表索引发生变化了，可能会导致存储过程失效。我们在开发软件的时候往往需要进行版本管理，但是存储过程本身没有版本控制，版本迭代更新的时候很麻烦。</p> <p>**4、它不适合高并发的场景。**高并发的场景需要减少数据库的压力，有时数据库会采用分库分表的方式，而且对可扩展性要求很高，在这种情况下，存储过程会变得难以维护， 增加数据库的压力 ，显然就不适用了。</p> <p>小结：</p> <p>存储过程既方便，又有局限性。尽管不同的公司对存储过程的态度不一，但是对于我们开发人员来说，不论怎样，掌握存储过程都是必备的技能之一。</p> <h1 id="第3章-变量、流程控制与游标"><a href="#第3章-变量、流程控制与游标" class="header-anchor">#</a> 第3章 变量、流程控制与游标</h1> <h2 id="_1-变量"><a href="#_1-变量" class="header-anchor">#</a> <strong>1.</strong> <strong>变量</strong></h2> <h3 id="_1-1-系统变量"><a href="#_1-1-系统变量" class="header-anchor">#</a> <strong>1.1</strong> <strong>系统变量</strong></h3> <h4 id="_1-1-1-系统变量分类"><a href="#_1-1-1-系统变量分类" class="header-anchor">#</a> <strong>1.1.1</strong> <strong>系统变量分类</strong></h4> <p>系统变量分为全局系统变量（需要添加<code>global</code>关键字）以及会话系统变量（需要添加<code>session</code>关键字），有时也把全局系统变量简称为全局变量，有时也把会话系统变量称为local变量。**如果不写，默认会话级别。**静态变量（在 MySQL 服务实例运行期间它们的值不能使用 set 动态修改）属于特殊的全局系统变量。</p> <ul><li><p>全局系统变量针对于所有会话（连接）有效，但<code>不能跨重启</code></p></li> <li><p>会话系统变量仅针对于当前会话（连接）有效。会话期间，当前会话对某个会话系统变量值的修改，不会影响其他会话同一个会话系统变量的值。</p></li> <li><p>会话1对某个全局系统变量值的修改会导致会话2中同一个全局系统变量值的修改。</p></li></ul> <h4 id="_1-1-2-查看系统变量"><a href="#_1-1-2-查看系统变量" class="header-anchor">#</a> <strong>1.1.2</strong> <strong>查看系统变量</strong></h4> <ul><li><strong>查看所有或部分系统变量</strong></li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#查看所有全局变量 
SHOW GLOBAL VARIABLES; 
#查看所有会话变量 
SHOW SESSION VARIABLES; 
#或
SHOW VARIABLES;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#查看满足条件的部分系统变量。 
SHOW GLOBAL VARIABLES LIKE '%标识符%';
#查看满足条件的部分会话变量 
SHOW SESSION VARIABLES LIKE '%标识符%';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>查看指定系统变量</strong></li></ul> <p>作为 MySQL 编码规范，MySQL 中的系统变量以<code>两个“@”</code>开头，其中“@@global”仅用于标记全局系统变量，“@@session”仅用于标记会话系统变量。“@@”首先标记会话系统变量，如果会话系统变量不存在，则标记全局系统变量。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#查看指定的系统变量的值 
SELECT @@global.变量名; 
#查看指定的会话变量的值 
SELECT @@session.变量名; 
#或者 
SELECT @@变量名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><strong>修改系统变量的值</strong></li></ul> <p>方式1：修改MySQL 配置文件 ，继而修改MySQL系统变量的值（该方法需要重启MySQL服务）</p> <p>方式2：在MySQL服务运行期间，使用“set”命令重新设置系统变量的值</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#为某个系统变量赋值 
#方式1： 
SET @@global.变量名=变量值; 
#方式2： 
SET GLOBAL 变量名=变量值;
#为某个会话变量赋值 
#方式1： 
SET @@session.变量名=变量值; 
#方式2： 
SET SESSION 变量名=变量值;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_1-2-用户变量"><a href="#_1-2-用户变量" class="header-anchor">#</a> <strong>1.2</strong> <strong>用户变量</strong></h3> <h4 id="_1-2-1-用户变量分类"><a href="#_1-2-1-用户变量分类" class="header-anchor">#</a> <strong>1.2.1</strong> <strong>用户变量分类</strong></h4> <p>用户变量是用户自己定义的，作为 MySQL 编码规范，MySQL 中的用户变量以<code>一个“@”</code>开头。根据作用范围不同，又分为<code>会话用户变量</code>和<code>局部变量</code>。</p> <ul><li>会话用户变量：作用域和会话变量一样，只对<code>当前连接</code>会话有效。</li> <li>局部变量：只在 BEGIN 和 END 语句块中有效。局部变量只能在<code>存储过程和函数</code>中使用。</li></ul> <h4 id="_1-2-2-会话用户变量"><a href="#_1-2-2-会话用户变量" class="header-anchor">#</a> <strong>1.2.2</strong> <strong>会话用户变量</strong></h4> <ul><li>变量的定义</li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#方式1：“=”或“:=” 
SET @用户变量 = 值; 
SET @用户变量 := 值; 
#方式2：“:=” 或 INTO关键字 
SELECT @用户变量 := 表达式 [FROM 等子句]; 
SELECT 表达式 INTO @用户变量 [FROM 等子句];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>查看用户变量的值 （查看、比较、运算等）</li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT @用户变量
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_1-2-3-局部变量"><a href="#_1-2-3-局部变量" class="header-anchor">#</a> <strong>1.2.3</strong> <strong>局部变量</strong></h4> <p>定义：可以使用<code>DECLARE</code>语句定义一个局部变量</p> <p>作用域：仅仅在定义它的 BEGIN ... END 中有效</p> <p>位置：只能放在 BEGIN ... END 中，而且只能放在第一句</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>BEGIN
	#声明局部变量 
	DECLARE 变量名1 变量数据类型 [DEFAULT 变量默认值]; 
	DECLARE 变量名2,变量名3,... 变量数据类型 [DEFAULT 变量默认值];
    #为局部变量赋值 
    SET 变量名1 = 值; 
    SELECT 值 INTO 变量名2 [FROM 子句]; 
    #查看局部变量的值 
    SELECT 变量1,变量2,变量3; 
END
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>1.定义变量</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DECLARE 变量名 类型 [default 值]; # 如果没有DEFAULT子句，初始值为NULL
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2.变量赋值</strong></p> <p>方式1：一般用于赋简单的值</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET 变量名=值; 
SET 变量名:=值;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>方式2：一般用于赋表中的字段值</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 字段名或表达式 INTO 变量名 FROM 表;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3.使用变量</strong>（查看、比较、运算等）</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT 局部变量名;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_1-2-4-对比会话用户变量与局部变量"><a href="#_1-2-4-对比会话用户变量与局部变量" class="header-anchor">#</a> <strong>1.2.4</strong> <strong>对比会话用户变量与局部变量</strong></h4> <table><thead><tr><th></th> <th>作用域</th> <th>定义位置</th> <th>语法</th></tr></thead> <tbody><tr><td>会话用户变量</td> <td>当前会话</td> <td>会话的任何地方</td> <td>加@符号，不用指定类型</td></tr> <tr><td>局部变量</td> <td>定义它的BEGIN END中</td> <td>BEGIN END的第一句话</td> <td>一般不用加@,需要指定类型</td></tr></tbody></table> <h2 id="_2-定义条件与处理程序"><a href="#_2-定义条件与处理程序" class="header-anchor">#</a> <strong>2.</strong> <strong>定义条件与处理程序</strong></h2> <p><code>定义条件</code>是事先定义程序执行过程中可能遇到的问题，<code>处理程序</code>定义了在遇到问题时应当采取的处理方式，并且保证存储过程或函数在遇到警告或错误时能继续执行。这样可以增强存储程序处理问题的能力，避免程序异常停止运行。</p> <p>说明：定义条件和处理程序在存储过程、存储函数中都是支持的。</p> <p>在存储过程中未定义条件和处理程序，且当存储过程中执行的SQL语句报错时，MySQL数据库会抛出错误，并退出当前SQL逻辑，不再向下继续执行。</p> <h3 id="_2-1-定义条件"><a href="#_2-1-定义条件" class="header-anchor">#</a> <strong>2.1</strong> <strong>定义条件</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DECLARE 错误名称 CONDITION FOR 错误码（或错误条件）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>错误码的说明：</p> <ul><li><p><code>MySQL_error_code</code>和<code>sqlstate_value</code>都可以表示MySQL的错误。</p> <ul><li>MySQL_error_code是数值类型错误代码。</li> <li>sqlstate_value是长度为5的字符串类型错误代码。</li></ul></li> <li><p>例如，在ERROR 1418 (HY000)中，1418是MySQL_error_code，'HY000'是sqlstate_value。</p></li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#使用MySQL_error_code 
DECLARE Field_Not_Be_NULL CONDITION FOR 1048; 
#使用sqlstate_value 
DECLARE Field_Not_Be_NULL CONDITION FOR SQLSTATE '23000';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-2-定义处理程序"><a href="#_2-2-定义处理程序" class="header-anchor">#</a> <strong>2.2</strong> <strong>定义处理程序</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DECLARE 处理方式 HANDLER FOR 错误类型 处理语句
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><strong>处理方式</strong>：处理方式有3个取值：CONTINUE、EXIT、UNDO。</p> <ul><li><code>CONTINUE</code>：表示遇到错误不处理，继续执行。</li> <li><code>EXIT</code>：表示遇到错误马上退出。</li> <li><code>UNDO</code>：表示遇到错误后撤回之前的操作。MySQL中暂时不支持这样的操作。</li></ul></li> <li><p><strong>错误类型</strong>（即条件）可以有如下取值：</p> <ul><li><code>SQLSTATE '字符串错误码'</code>：表示长度为5的sqlstate_value类型的错误代码；</li> <li><code>MySQL_error_code</code>：匹配数值类型错误代码；</li> <li><code>错误名称</code>：表示DECLARE ... CONDITION定义的错误条件名称。</li> <li><code>SQLWARNING</code>：匹配所有以01开头的SQLSTATE错误代码；</li> <li><code>NOT FOUND</code>：匹配所有以02开头的SQLSTATE错误代码；</li> <li><code>SQLEXCEPTION</code>：匹配所有没有被SQLWARNING或NOT FOUND捕获的SQLSTATE错误代码；</li></ul></li> <li><p><strong>处理语句</strong>：如果出现上述条件之一，则采用对应的处理方式，并执行指定的处理语句。语句可以是像“<code>SET 变量 = 值</code>”这样的简单语句，也可以是使用<code>BEGIN ... END</code>编写的复合语句。</p></li></ul> <p>定义处理程序的几种方式，代码如下：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#方法1：捕获sqlstate_value 
DECLARE CONTINUE HANDLER FOR SQLSTATE '42S02' SET @info = 'NO_SUCH_TABLE'; 
#方法2：捕获mysql_error_value 
DECLARE CONTINUE HANDLER FOR 1146 SET @info = 'NO_SUCH_TABLE'; 
#方法3：先定义条件，再调用 
DECLARE no_such_table CONDITION FOR 1146;
DECLARE CONTINUE HANDLER FOR NO_SUCH_TABLE SET @info = 'NO_SUCH_TABLE'; 
#方法4：使用SQLWARNING 
DECLARE EXIT HANDLER FOR SQLWARNING SET @info = 'ERROR'; 
#方法5：使用NOT FOUND 
DECLARE EXIT HANDLER FOR NOT FOUND SET @info = 'NO_SUCH_TABLE'; 
#方法6：使用SQLEXCEPTION 
DECLARE EXIT HANDLER FOR SQLEXCEPTION SET @info = 'ERROR';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_3-流程控制"><a href="#_3-流程控制" class="header-anchor">#</a> <strong>3.</strong> <strong>流程控制</strong></h2> <h3 id="_3-1-分支结构之-if"><a href="#_3-1-分支结构之-if" class="header-anchor">#</a> <strong>3.1</strong> <strong>分支结构之</strong> <strong>IF</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>IF 表达式1 THEN 操作1 
[ELSEIF 表达式2 THEN 操作2]…… 
[ELSE 操作N] 
END IF
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-2-分支结构之-case"><a href="#_3-2-分支结构之-case" class="header-anchor">#</a> <strong>3.2</strong> <strong>分支结构之</strong> <strong>CASE</strong></h3> <p>CASE 语句的语法结构1：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#情况一：类似于switch 
CASE 表达式 
WHEN 值1 THEN 结果1或语句1(如果是语句，需要加分号) 
WHEN 值2 THEN 结果2或语句2(如果是语句，需要加分号) 
... 
ELSE 结果n或语句n(如果是语句，需要加分号) 
END [case]（如果是放在begin end中需要加上case，如果放在select后面不需要）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>CASE 语句的语法结构2：</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>#情况二：类似于多重if 
CASE 
WHEN 条件1 THEN 结果1或语句1(如果是语句，需要加分号) 
WHEN 条件2 THEN 结果2或语句2(如果是语句，需要加分号) 
... 
ELSE 结果n或语句n(如果是语句，需要加分号) 
END [case]（如果是放在begin end中需要加上case，如果放在select后面不需要）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-3-循环结构之loop"><a href="#_3-3-循环结构之loop" class="header-anchor">#</a> <strong>3.3</strong> <strong>循环结构之LOOP</strong></h3> <p>LOOP循环语句用来重复执行某些语句。LOOP内的语句一直重复执行直到循环被退出（使用LEAVE子句），跳出循环过程。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>[loop_label:] LOOP 
	循环执行的语句 
END LOOP [loop_label]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-4-循环结构之while"><a href="#_3-4-循环结构之while" class="header-anchor">#</a> <strong>3.4</strong> <strong>循环结构之WHILE</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>[while_label:] WHILE 循环条件 DO 
	循环体 
END WHILE [while_label];
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-5-循环结构之repeat"><a href="#_3-5-循环结构之repeat" class="header-anchor">#</a> <strong>3.5</strong> <strong>循环结构之REPEAT</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>[repeat_label:] REPEAT 
	循环体的语句 
	UNTIL 结束循环的条件表达式 
END REPEAT [repeat_label]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>对比三种循环结构：</strong></p> <p>1、这三种循环都可以省略名称，但如果循环中添加了循环控制语句（LEAVE或ITERATE）则必须添加名称。 2、 LOOP：一般用于实现简单的&quot;死&quot;循环；WHILE：先判断后执行；REPEAT：先执行后判断，无条件至少执行一次。</p> <h3 id="_3-6-跳转语句之leave语句"><a href="#_3-6-跳转语句之leave语句" class="header-anchor">#</a> <strong>3.6</strong> <strong>跳转语句之LEAVE语句</strong></h3> <p>LEAVE语句：可以用在循环语句内，或者以 BEGIN 和 END 包裹起来的程序体内，表示跳出循环或者跳出程序体的操作。如果你有面向过程的编程语言的使用经验，你可以把 LEAVE 理解为 break。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>LEAVE 标记名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-7-跳转语句之iterate语句"><a href="#_3-7-跳转语句之iterate语句" class="header-anchor">#</a> <strong>3.7</strong> <strong>跳转语句之ITERATE语句</strong></h3> <p>ITERATE语句：只能用在循环语句（LOOP、REPEAT和WHILE语句）内，表示重新开始循环，将执行顺序转到语句段开头处。如果你有面向过程的编程语言的使用经验，你可以把 ITERATE 理解为 continue，意思为“再次循环”。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>ITERATE label
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_4-游标"><a href="#_4-游标" class="header-anchor">#</a> <strong>4.</strong> <strong>游标</strong></h2> <h3 id="_4-1-什么是游标-或光标"><a href="#_4-1-什么是游标-或光标" class="header-anchor">#</a> <strong>4.1</strong> <strong>什么是游标（或光标）</strong></h3> <p>游标，提供了一种灵活的操作方式，让我们能够对结果集中的每一条记录进行定位，并对指向的记录中的数据进行操作的数据结构。<strong>游标让</strong> <strong>SQL</strong> <strong>这种面向集合的语言有了面向过程开发的能力。</strong></p> <h3 id="_4-2-使用游标步骤"><a href="#_4-2-使用游标步骤" class="header-anchor">#</a> <strong>4.2</strong> <strong>使用游标步骤</strong></h3> <p>游标必须在声明处理程序之前被声明，并且变量和条件还必须在声明游标或处理程序之前被声明。</p> <p><strong>第一步，声明游标</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DECLARE cursor_name CURSOR FOR select_statement;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>第二步，打开游标</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>OPEN cursor_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>第三步，使用游标（从游标中取得数据）</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>FETCH cursor_name INTO var_name [, var_name] ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：<strong>游标的查询结果集中的字段数，必须跟</strong> <strong>INTO</strong> <strong>后面的变量数一致</strong>，否则，在存储过程执行的时候，MySQL 会提示错误。</p> <p><strong>第四步，关闭游标</strong></p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CLOSE cursor_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当我们使用完游标后需要关闭掉该游标。因为游标会占用系统资源 ，如果不及时关闭，<strong>游标会一直保持到存储过程结束</strong>，影响系统运行的效率。</p> <h3 id="_4-3-小结"><a href="#_4-3-小结" class="header-anchor">#</a> <strong>4.3</strong> <strong>小结</strong></h3> <p>游标是 MySQL 的一个重要的功能，为<code>逐条读取</code>结果集中的数据，提供了完美的解决方案。跟在应用层面实现相同的功能相比，游标可以在存储程序中使用，效率高，程序也更加简洁。</p> <p>但同时也会带来一些性能问题，比如在使用游标的过程中，会对数据行进行<code>加锁</code>，这样在业务并发量大的时候，不仅会影响业务之间的效率，还会<code>消耗系统资源</code>，造成内存不足，这是因为游标是在内存中进行的处理。</p> <p>建议：养成用完之后就关闭的习惯，这样才能提高系统的整体效率。</p> <h2 id="补充-mysql-8-0的新特性-全局变量的持久化"><a href="#补充-mysql-8-0的新特性-全局变量的持久化" class="header-anchor">#</a> <strong>补充：MySQL 8.0的新特性—全局变量的持久化</strong></h2> <p>使用SET GLOBAL语句设置的变量值只会<code>临时生效</code>。<code>数据库重启</code>后，服务器又会从MySQL配置文件中读取变量的默认值。 MySQL 8.0版本新增了<code>SET PERSIST</code>命令。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SET PERSIST global max_connections = 1000;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>MySQL会将该命令的配置保存到数据目录下的 mysqld-auto.cnf 文件中，下次启动时会读取该文件，用其中的配置来覆盖默认的配置文件。</p> <h1 id="第4章-触发器"><a href="#第4章-触发器" class="header-anchor">#</a> 第4章 触发器</h1> <h2 id="_1-触发器概述"><a href="#_1-触发器概述" class="header-anchor">#</a> <strong>1.</strong> <strong>触发器概述</strong></h2> <p>MySQL从<code>5.0.2</code>版本开始支持触发器。MySQL的触发器和存储过程一样，都是嵌入到MySQL服务器的一段程序。</p> <p>触发器是由<code>事件来触发</code>某个操作，这些事件包括<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code>事件。所谓事件就是指用户的动作或者触发某项行为。如果定义了触发程序，当数据库执行这些语句时候，就相当于事件发生了，就会<code>自动</code>激发触发器执行相应的操作。</p> <p>当对数据表中的数据执行插入、更新和删除操作，需要自动执行一些数据库逻辑时，可以使用触发器来实现。</p> <h2 id="_2-触发器的创建"><a href="#_2-触发器的创建" class="header-anchor">#</a> <strong>2.</strong> <strong>触发器的创建</strong></h2> <h3 id="_2-1-创建触发器语法"><a href="#_2-1-创建触发器语法" class="header-anchor">#</a> <strong>2.1</strong> <strong>创建触发器语法</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>CREATE TRIGGER 触发器名称 
{BEFORE|AFTER} {INSERT|UPDATE|DELETE} ON 表名 
FOR EACH ROW 
触发器执行的语句块;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>说明：</p> <ul><li><code>表名</code>：表示触发器监控的对象。</li> <li><code>BEFORE|AFTER</code>：表示触发的时间。BEFORE 表示在事件之前触发；AFTER 表示在事件之后触发。</li> <li><code>INSERT|UPDATE|DELETE</code>：表示触发的事件。
<ul><li>INSERT 表示插入记录时触发；</li> <li>UPDATE 表示更新记录时触发；</li> <li>DELETE 表示删除记录时触发。</li></ul></li></ul> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DELIMITER // 
CREATE TRIGGER before_insert 
BEFORE INSERT ON test_trigger 
FOR EACH ROW 
BEGIN
	INSERT INTO test_trigger_log (t_log) 
	VALUES('before_insert'); 
END // 
DELIMITER ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_3-查看、删除触发器"><a href="#_3-查看、删除触发器" class="header-anchor">#</a> <strong>3.</strong> <strong>查看、删除触发器</strong></h2> <h3 id="_3-1-查看触发器"><a href="#_3-1-查看触发器" class="header-anchor">#</a> <strong>3.1</strong> <strong>查看触发器</strong></h3> <p>方式1：查看当前数据库的所有触发器的定义</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SHOW TRIGGERS\G
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方式2：查看当前数据库中某个触发器的定义</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SHOW CREATE TRIGGER 触发器名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方式3：从系统库information_schema的TRIGGERS表中查询“salary_check_trigger”触发器的信息。</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * FROM information_schema.TRIGGERS;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-2-删除触发器"><a href="#_3-2-删除触发器" class="header-anchor">#</a> <strong>3.2</strong> <strong>删除触发器</strong></h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DROP TRIGGER IF EXISTS 触发器名称;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_4-触发器的优缺点"><a href="#_4-触发器的优缺点" class="header-anchor">#</a> <strong>4.</strong> <strong>触发器的优缺点</strong></h2> <h3 id="_4-1-优点"><a href="#_4-1-优点" class="header-anchor">#</a> <strong>4.1</strong> <strong>优点</strong></h3> <p><strong>1、触发器可以确保数据的完整性</strong>。</p> <p><strong>2、触发器可以帮助我们记录操作日志。</strong></p> <p><strong>3、触发器还可以用在操作数据前，对数据进行合法性检查。</strong></p> <h3 id="_4-2-缺点"><a href="#_4-2-缺点" class="header-anchor">#</a> <strong>4.2</strong> <strong>缺点</strong></h3> <p><strong>1、触发器最大的一个问题就是可读性差。</strong></p> <p>比如触发器中的数据插入操作多了一个字段，系统提示错误。可是，如果你不了解这个触发器，很可能会认为是更新语句本身的问题，或者是表的结构出了问题。</p> <p><strong>2、相关数据的变更，可能会导致触发器出错。</strong></p> <p>特别是数据表结构的变更，都可能会导致触发器出错，进而影响数据操作的正常运行。这些都会由于触发器本身的隐蔽性，影响到应用中错误原因排查的效率。</p> <h3 id="_4-3-注意点"><a href="#_4-3-注意点" class="header-anchor">#</a> <strong>4.3</strong> <strong>注意点</strong></h3> <p>注意，如果在子表中定义了外键约束，并且外键指定了ON UPDATE/DELETE CASCADE/SET NULL子句，此时修改父表被引用的键值或删除父表被引用的记录行时，也会引起子表的修改和删除操作，此时基于子表的UPDATE和DELETE语句定义的触发器并不会被激活。</p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/06/04, 00:16:10</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/4d73cb/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">SQL之DDL、DML、DCL使用篇</div></a> <a href="/pages/4b0689/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">MySQL8 新特性篇</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/4d73cb/" class="prev">SQL之DDL、DML、DCL使用篇</a></span> <span class="next"><a href="/pages/4b0689/">MySQL8 新特性篇</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:zgming@aliyun.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/coder-gm" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2017-2022
    <span>苏ICP备2022003313号-1</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.44e0923e.js" defer></script><script src="/assets/js/2.4a42c91c.js" defer></script><script src="/assets/js/88.6b53f094.js" defer></script>
  </body>
</html>
